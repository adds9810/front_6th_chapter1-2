var we=Object.defineProperty;var ce=e=>{throw TypeError(e)};var ve=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var j=(e,t,r)=>ve(e,typeof t!="symbol"?t+"":t,r),Y=(e,t,r)=>t.has(e)||ce("Cannot "+r);var v=(e,t,r)=>(Y(e,t,"read from private field"),r?r.call(e):t.get(e)),R=(e,t,r)=>t.has(e)?ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),L=(e,t,r,s)=>(Y(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),Q=(e,t,r)=>(Y(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();const Ee="modulepreload",Ne=function(e){return"/front_6th_chapter1-2/"+e},le={},Se=function(t,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(d=>{if(d=Ne(d),d in le)return;le[d]=!0;const x=d.endsWith(".css"),i=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${i}`))return;const u=document.createElement("link");if(u.rel=x?"stylesheet":Ee,x||(u.as="script"),u.crossOrigin="",u.href=d,l&&u.setAttribute("nonce",l),document.head.appendChild(u),x)return new Promise((S,V)=>{u.addEventListener("load",S),u.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&c(l.reason);return t().catch(c)})},U=new Map;function Te(e){e.addEventListener("click",T),e.addEventListener("change",T),e.addEventListener("input",T),e.addEventListener("keydown",T),e.addEventListener("keyup",T),e.addEventListener("submit",T),e.addEventListener("mouseover",T),e.addEventListener("focus",T),e.addEventListener("blur",T)}function T(e){const t=e.target,r=e.type,s=U.get(t);s&&s[r]&&s[r].forEach(n=>{n.call(t,e)})}function me(e,t,r){U.has(e)||U.set(e,{});const s=U.get(e);s[t]||(s[t]=[]),s[t].push(r)}function Ce(e,t,r){const s=U.get(e);if(s&&s[t]){const n=s[t].indexOf(r);n>-1&&s[t].splice(n,1),s[t].length===0&&delete s[t]}}function _(e){if(e==null||typeof e=="boolean")return document.createTextNode("");if(typeof e=="string"||typeof e=="number")return document.createTextNode(String(e));if(Array.isArray(e)){const r=document.createDocumentFragment();return e.forEach(s=>{const n=_(s);n&&r.appendChild(n)}),r}if(typeof e.type=="function")throw new Error("ì»´í¬ë„ŒíŠ¸ëŠ” normalizeVNodeë¡œ ë¨¼ì € ì •ê·œí™”í•´ì•¼ í•©ë‹ˆë‹¤.");const t=document.createElement(e.type);return e.props&&Ae(t,e.props),e.children&&e.children.forEach(r=>{if(r!=null&&r!==!1&&r!==!0){const s=_(r);s&&t.appendChild(s)}}),t}function Ae(e,t){Object.entries(t).forEach(([r,s])=>{if(r!=="children")if(r.startsWith("on")&&typeof s=="function"){const n=r.toLowerCase().substring(2);me(e,n,s)}else r==="className"?e.className=s:r==="checked"||r==="disabled"||r==="selected"||r==="readOnly"?(e.removeAttribute(r),e[r]=!!s):r==="value"&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT")?e.value=s:s!=null&&e.setAttribute(r,s)})}const ge=()=>{const e=new Set;return{subscribe:s=>e.add(s),notify:()=>e.forEach(s=>s())}},Le=(e,t=window.localStorage)=>({get:()=>{try{const c=t.getItem(e);return c?JSON.parse(c):null}catch(c){return console.error(`Error parsing storage item for key "${e}":`,c),null}},set:c=>{try{t.setItem(e,JSON.stringify(c))}catch(o){console.error(`Error setting storage item for key "${e}":`,o)}},reset:()=>{try{t.removeItem(e)}catch(c){console.error(`Error removing storage item for key "${e}":`,c)}}}),X=(e,t)=>{const{subscribe:r,notify:s}=ge();let n=t;return{getState:()=>n,dispatch:l=>{const d=e(n,l);d!==n&&(n=d,s())},subscribe:r}};function a(e,t,...r){t===void 0&&(t=null);const s=r.flat(1/0).filter(n=>n!=null&&n!==!1&&n!==!0);return{type:e,props:t,children:s}}function F(e){if(e==null||typeof e=="boolean")return"";if(typeof e=="string"||typeof e=="number")return String(e);if(typeof e.type=="function"){let t={...e.props};t||(t={}),"children"in t||(t.children=e.children||[]);const r=e.type(t);return r==null?"":F(r)}if(Array.isArray(e))return e.map(r=>F(r)).filter(r=>r!=null&&r!=="");if(e.children){const t=e.children.map(r=>F(r)).filter(r=>r!=null&&r!=="");return{...e,children:t}}return e}function Oe(e,t,r){if(t!=="children")if(t==="className")r?e.className=r:e.removeAttribute("class");else if(t==="checked"||t==="selected")e[t]=!!r,e.removeAttribute(t);else if(t==="disabled"||t==="readOnly")r?(e.setAttribute(t,""),e[t]=!0):(e.removeAttribute(t),e[t]=!1);else if(t==="value"&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"))e.value=r;else if(t.startsWith("on")&&typeof r=="function"){const s=t.toLowerCase().substring(2);me(e,s,r)}else r===!1||r===null||r===void 0?e.removeAttribute(t):e.setAttribute(t,r)}function _e(e,t={},r={}){new Set([...Object.keys(t),...Object.keys(r)]).forEach(n=>{if(n==="children")return;const c=t[n],o=r[n];if(c!==o){if(n.startsWith("on")&&typeof c=="function"){const l=n.toLowerCase().substring(2);Ce(e,l,c)}Oe(e,n,o)}})}function Re(e,t=[],r=[]){const s=t.length,n=r.length,c=Array.from(e.childNodes);for(let o=0;o<Math.min(s,n);o++)pe(c[o],t[o],r[o]);if(n>s)for(let o=s;o<n;o++)e.appendChild(_(r[o]));else if(s>n)for(let o=s-1;o>=n;o--)c[o]&&e.removeChild(c[o])}function pe(e,t,r){if(t!==r){if(typeof r=="string"||typeof r=="number"){e.textContent!==String(r)&&(e.textContent=String(r));return}if(typeof t=="string"||typeof t=="number"){const s=_(r);s&&e.parentNode.replaceChild(s,e);return}if(t.type!==r.type){const s=_(r);s&&e.parentNode.replaceChild(s,e);return}_e(e,t.props||{},r.props||{}),Re(e,t.children||[],r.children||[])}}let H=null;function Pe(e,t){const r=F(e);!H||H.type!==r.type?(t.innerHTML="",t.appendChild(_(r))):t.firstChild?pe(t.firstChild,H,r):t.appendChild(_(r)),H=r,Te(t)}var D,N,O,I,k,B;const C=class C{constructor(t=""){R(this,k);R(this,D);R(this,N);R(this,O,ge());R(this,I);L(this,D,new Map),L(this,N,null),L(this,I,t.replace(/\/$/,"")),window.addEventListener("popstate",()=>{L(this,N,Q(this,k,B).call(this)),v(this,O).notify()}),document.addEventListener("click",r=>{if(r.target.closest("[data-link]")){r.preventDefault();const s=r.target.getAttribute("href")||r.target.closest("[data-link]").getAttribute("href");s&&this.push(s)}})}get baseUrl(){return v(this,I)}get query(){return C.parseQuery(window.location.search)}set query(t){const r=C.getUrl(t,v(this,I));this.push(r)}get params(){var t;return((t=v(this,N))==null?void 0:t.params)??{}}get route(){return v(this,N)}get target(){var t;return(t=v(this,N))==null?void 0:t.handler}subscribe(t){v(this,O).subscribe(t)}addRoute(t,r){const s=[],n=t.replace(/:\w+/g,o=>(s.push(o.slice(1)),"([^/]+)")).replace(/\//g,"\\/"),c=new RegExp(`^${n}$`);console.log("Adding route:",t,"regex:",c),v(this,D).set(t,{regex:c,paramNames:s,handler:r})}push(t){try{const r=t.startsWith("/")?t:"/"+t;window.location.pathname+window.location.search!==r&&window.history.pushState(null,"",r),L(this,N,Q(this,k,B).call(this,r)),v(this,O).notify()}catch(r){console.error("ë¼ìš°í„° ë„¤ë¹„ê²Œì´ì…˜ ì˜¤ë¥˜:",r)}}start(){L(this,N,Q(this,k,B).call(this)),v(this,O).notify()}};D=new WeakMap,N=new WeakMap,O=new WeakMap,I=new WeakMap,k=new WeakSet,B=function(t=window.location.pathname){const{pathname:r}=new URL(t,window.location.origin);console.log("Finding route for pathname:",r);for(const[s,n]of v(this,D)){console.log("Checking route:",s,"regex:",n.regex);const c=r.match(n.regex);if(c){console.log("Route matched:",s);const o={};return n.paramNames.forEach((l,d)=>{o[l]=c[d+1]}),{...n,params:o,path:s}}}return console.log("No route found for:",r),null},j(C,"parseQuery",(t=window.location.search)=>{const r=new URLSearchParams(t),s={};for(const[n,c]of r)s[n]=c;return s}),j(C,"stringifyQuery",t=>{const r=new URLSearchParams;for(const[s,n]of Object.entries(t))n!=null&&n!==""&&r.set(s,String(n));return r.toString()}),j(C,"getUrl",(t,r="")=>{const n={...C.parseQuery(),...t};Object.keys(n).forEach(o=>{(n[o]===null||n[o]===void 0||n[o]==="")&&delete n[o]});const c=C.stringifyQuery(n);return`${r}${window.location.pathname.replace(r,"")}${c?`?${c}`:""}`});let $=C;const p={SET_PRODUCTS:"products/setProducts",ADD_PRODUCTS:"products/addProducts",SET_LOADING:"products/setLoading",SET_ERROR:"products/setError",SET_CATEGORIES:"products/setCategories",SET_CURRENT_PRODUCT:"products/setCurrentProduct",SET_RELATED_PRODUCTS:"products/setRelatedProducts",RESET_FILTERS:"products/resetFilters",SETUP:"products/setup",SET_STATUS:"products/setStatus"},h={ADD_ITEM:"cart/addItem",REMOVE_ITEM:"cart/removeItem",UPDATE_QUANTITY:"cart/updateQuantity",CLEAR_CART:"cart/clearCart",TOGGLE_SELECT:"cart/toggleSelect",SELECT_ALL:"cart/selectAll",DESELECT_ALL:"cart/deselectAll",REMOVE_SELECTED:"cart/removeSelected",LOAD_FROM_STORAGE:"cart/loadFromStorage",SYNC_TO_STORAGE:"cart/syncToStorage"},b={OPEN_CART_MODAL:"ui/openCartModal",CLOSE_CART_MODAL:"ui/closeCartModal",SHOW_TOAST:"ui/showToast",HIDE_TOAST:"ui/hideToast"},Z={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:"idle",categories:null},De=(e,t)=>{switch(t.type){case p.SET_STATUS:return{...e,status:t.payload};case p.SET_CATEGORIES:return{...e,categories:t.payload,loading:!1,error:null,status:"done"};case p.SET_PRODUCTS:return{...e,products:t.payload.products,totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case p.ADD_PRODUCTS:return{...e,products:[...e.products,...t.payload.products],totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case p.SET_LOADING:return{...e,loading:t.payload};case p.SET_ERROR:return{...e,error:t.payload,loading:!1,status:"done"};case p.SET_CURRENT_PRODUCT:return{...e,currentProduct:t.payload,loading:!1,error:null,status:"done"};case p.SET_RELATED_PRODUCTS:return{...e,relatedProducts:t.payload,status:"done"};case p.SETUP:return{...e,...t.payload};default:return e}},f=X(De,Z),ee=Le("shopping_cart"),fe={items:[],selectedAll:!1},Ie=(e,t)=>e.find(r=>r.id===t),ke=(e,t)=>{const r=ee.get()??fe;switch(t.type){case h.ADD_ITEM:{const{product:s,quantity:n=1}=t.payload;if(Ie(r.items,s.productId))return{...r,items:r.items.map(o=>o.id===s.productId?{...o,quantity:o.quantity+n}:o)};{const o={id:s.productId,title:s.title,image:s.image,price:parseInt(s.lprice),quantity:n,selected:!1};return{...r,items:[...r.items,o]}}}case h.REMOVE_ITEM:return{...r,items:r.items.filter(s=>s.id!==t.payload)};case h.UPDATE_QUANTITY:{const{productId:s,quantity:n}=t.payload;return{...r,items:r.items.map(c=>c.id===s?{...c,quantity:Math.max(1,n)}:c)}}case h.CLEAR_CART:return{...r,items:[],selectedAll:!1};case h.TOGGLE_SELECT:{const s=t.payload,n=r.items.map(o=>o.id===s?{...o,selected:!o.selected}:o),c=n.length>0&&n.every(o=>o.selected);return{...r,items:n,selectedAll:c}}case h.SELECT_ALL:{const s=r.items.map(n=>({...n,selected:!0}));return{...r,items:s,selectedAll:!0}}case h.DESELECT_ALL:{const s=r.items.map(n=>({...n,selected:!1}));return{...r,items:s,selectedAll:!1}}case h.REMOVE_SELECTED:return{...r,items:r.items.filter(s=>!s.selected),selectedAll:!1};case h.LOAD_FROM_STORAGE:return{...r,...t.payload};default:return r}},E=X(ke,fe),Me={cartModal:{isOpen:!1},globalLoading:!1,toast:{isVisible:!1,message:"",type:"info"}},Ue=(e,t)=>{switch(t.type){case b.OPEN_CART_MODAL:return{...e,cartModal:{isOpen:!0}};case b.CLOSE_CART_MODAL:return{...e,cartModal:{isOpen:!1}};case b.HIDE_TOAST:return{...e,toast:{...e.toast,isVisible:!1}};case b.SHOW_TOAST:return{...e,toast:{isVisible:!0,message:t.payload.message,type:t.payload.type||"info"}};default:return e}},w=X(Ue,Me),te="/front_6th_chapter1-2/",m=new $(te),K=new WeakMap,P={current:null,previous:null},qe={mount:null,unmount:null,watches:[],deps:[],mounted:!1},re=e=>(K.has(e)||K.set(e,{...qe}),K.get(e)),je=(e,t)=>!Array.isArray(e)||!Array.isArray(t)?!1:e.length!==t.length?!0:e.some((r,s)=>r!==t[s]),Qe=e=>{var r;const t=re(e);t.mounted||(console.log("ğŸš€ í˜ì´ì§€ ë§ˆìš´íŠ¸:",e.name),(r=t.mount)==null||r.call(t),t.mounted=!0,t.deps=[])},He=e=>{var r;const t=re(e);t.mounted&&(console.log("ğŸ”» í˜ì´ì§€ ì–¸ë§ˆìš´íŠ¸:",e.name),(r=t.unmount)==null||r.call(t),t.mounted=!1)},ye=({onMount:e,onUnmount:t,watches:r}={},s)=>{const n=re(s);return typeof e=="function"&&(n.mount=e),typeof t=="function"&&(n.unmount=t),Array.isArray(r)&&(n.watches=typeof r[0]=="function"?[r]:r),(...c)=>{const o=P.current!==s;return P.current&&o&&He(P.current),P.previous=P.current,P.current=s,o?Qe(s):n.watches&&n.watches.forEach(([l,d],x)=>{const i=l();je(i,n.deps[x])&&(console.log(`ğŸ“Š ì˜ì¡´ì„± ë³€ê²½ ê°ì§€ (${s.name}):`,n.deps[x],"â†’",i),d()),n.deps[x]=Array.isArray(i)?[...i]:[]}),s(...c)}};async function ae(e={}){const{limit:t=20,search:r="",category1:s="",category2:n="",sort:c="price_asc"}=e,o=e.current??e.page??1,l=new URLSearchParams({page:o.toString(),limit:t.toString(),...r&&{search:r},...s&&{category1:s},...n&&{category2:n},sort:c});return await(await fetch(`/api/products?${l}`)).json()}async function We(e){return await(await fetch(`/api/products/${e}`)).json()}async function Fe(){return await new Promise(t=>setTimeout(t,200)),await(await fetch("/api/categories")).json()}const Be=async()=>{m.query={current:void 0},f.dispatch({type:p.SETUP,payload:{...Z,loading:!0,status:"pending"}});try{const e=new Promise(c=>setTimeout(c,300)),t=(async()=>{const c=await Fe(),{products:o,pagination:{total:l}}=await ae(m.query);return{products:o,categories:c,total:l}})(),[{products:r,categories:s,total:n}]=await Promise.all([t,e]);f.dispatch({type:p.SETUP,payload:{products:r,categories:s,totalCount:n,loading:!1,status:"done"}})}catch(e){throw f.dispatch({type:p.SET_ERROR,payload:e.message}),e}},se=async(e=!0)=>{try{f.dispatch({type:p.SETUP,payload:{loading:!0,status:"pending",error:null}});const{products:t,pagination:{total:r}}=await ae(m.query),s={products:t,totalCount:r};if(e){f.dispatch({type:p.SET_PRODUCTS,payload:s});return}f.dispatch({type:p.ADD_PRODUCTS,payload:s})}catch(t){throw f.dispatch({type:p.SET_ERROR,payload:t.message}),t}},Ge=async()=>{const e=f.getState();!(e.products.length<e.totalCount)||e.loading||(m.query={current:Number(m.query.current??1)+1},await se(!1))},ze=e=>{m.query={search:e,current:1}},G=e=>{m.query={...e,current:1}},Ve=e=>{m.query={sort:e,current:1}},Ye=e=>{m.query={limit:e,current:1}},ie=async e=>{try{const t=f.getState().currentProduct;if(e===(t==null?void 0:t.productId)){t.category2&&await de(t.category2,e);return}f.dispatch({type:p.SETUP,payload:{...Z,currentProduct:null,loading:!0,status:"pending"}});const r=await We(e);f.dispatch({type:p.SET_CURRENT_PRODUCT,payload:r}),r.category2&&await de(r.category2,e)}catch(t){throw console.error("ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨:",t),f.dispatch({type:p.SET_ERROR,payload:t.message}),t}},de=async(e,t)=>{try{const n=(await ae({category2:e,limit:20,page:1})).products.filter(c=>c.productId!==t);f.dispatch({type:p.SET_RELATED_PRODUCTS,payload:n})}catch(r){console.error("ê´€ë ¨ ìƒí’ˆ ë¡œë“œ ì‹¤íŒ¨:",r),f.dispatch({type:p.SET_RELATED_PRODUCTS,payload:[]})}},Ke=()=>{try{const e=ee.get();e&&E.dispatch({type:h.LOAD_FROM_STORAGE,payload:e})}catch(e){console.error("ì¥ë°”êµ¬ë‹ˆ ë¡œë“œ ì‹¤íŒ¨:",e)}},A=()=>{try{const e=E.getState();ee.set(e)}catch(e){console.error("ì¥ë°”êµ¬ë‹ˆ ì €ì¥ ì‹¤íŒ¨:",e)}},he=(e,t=1)=>{E.dispatch({type:h.ADD_ITEM,payload:{product:e,quantity:t}}),A(),w.dispatch({type:b.SHOW_TOAST,payload:{message:"ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"}}),setTimeout(()=>{w.dispatch({type:b.HIDE_TOAST})},3e3)},$e=e=>{E.dispatch({type:h.REMOVE_ITEM,payload:e}),A()},ne=(e,t)=>{E.dispatch({type:h.UPDATE_QUANTITY,payload:{productId:e,quantity:t}}),A()},Je=e=>{E.dispatch({type:h.TOGGLE_SELECT,payload:e}),A()},Xe=()=>{E.dispatch({type:h.SELECT_ALL}),A()},Ze=()=>{E.dispatch({type:h.DESELECT_ALL}),A()},et=()=>{E.dispatch({type:h.REMOVE_SELECTED}),A(),w.dispatch({type:b.SHOW_TOAST,payload:{message:"ì„ íƒëœ ìƒí’ˆë“¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤",type:"info"}}),setTimeout(()=>{w.dispatch({type:b.HIDE_TOAST})},3e3)},tt=()=>{E.dispatch({type:h.CLEAR_CART}),A(),w.dispatch({type:b.SHOW_TOAST,payload:{message:"ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì›Œì¡ŒìŠµë‹ˆë‹¤",type:"info"}}),setTimeout(()=>{w.dispatch({type:b.HIDE_TOAST})},3e3)},g=({src:e,...t})=>{const r=String(te+e).replace("//","/");return a("img",{src:r,...t})},rt=[10,20,50,100],at=[{value:"price_asc",label:"ê°€ê²© ë‚®ì€ìˆœ"},{value:"price_desc",label:"ê°€ê²© ë†’ì€ìˆœ"},{value:"name_asc",label:"ì´ë¦„ìˆœ"},{value:"name_desc",label:"ì´ë¦„ ì—­ìˆœ"}],st=async e=>{if(e.key==="Enter"){const t=e.target.value.trim();try{await ze(t)}catch(r){console.error("ê²€ìƒ‰ ì‹¤íŒ¨:",r)}}},nt=async e=>{const t=parseInt(e.target.value);try{await Ye(t)}catch(r){console.error("ìƒí’ˆ ìˆ˜ ë³€ê²½ ì‹¤íŒ¨:",r)}},ot=async e=>{const t=e.target.value;try{await Ve(t)}catch(r){console.error("ì •ë ¬ ë³€ê²½ ì‹¤íŒ¨:",r)}},ue=async e=>{const t=e.target.getAttribute("data-breadcrumb");try{if(t==="reset")await G({category1:"",category2:""});else if(t==="category1"){const r=e.target.getAttribute("data-category1");await G({category1:r,category2:""})}}catch(r){console.error("ë¸Œë ˆë“œí¬ëŸ¼ ë„¤ë¹„ê²Œì´ì…˜ ì‹¤íŒ¨:",r)}},ct=async e=>{const t=e.target.getAttribute("data-category1");if(t)try{await G({category1:t,category2:""})}catch(r){console.error("1depth ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹¤íŒ¨:",r)}},lt=async e=>{const t=e.target.getAttribute("data-category1"),r=e.target.getAttribute("data-category2");if(!(!t||!r))try{await G({category1:t,category2:r})}catch(s){console.error("2depth ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹¤íŒ¨:",s)}};function it({searchQuery:e="",limit:t=20,sort:r="price_asc",category:s={},categories:n=null,loading:c=!1}){const o=n&&Object.keys(n).length>0?Object.keys(n):[];console.log("SearchBar render:",{categories:n,categoryList:o,categoryListLength:o.length,shouldShowLoading:n===null||o.length===0});const l=rt.map(i=>a("option",{key:i,value:i,selected:Number(t)===i},i,"ê°œ")),d=at.map(({value:i,label:u})=>a("option",{key:i,value:i,selected:r===i},u)),x=o.map(i=>a("button",{key:i,"data-category1":i,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:ct},i));return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4"},a("div",{className:"mb-4"},a("div",{className:"relative"},a("input",{type:"text",id:"search-input",placeholder:"ìƒí’ˆëª…ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”...",value:e,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:st}),a("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},a(g,{src:"/search-icon.svg",alt:"ê²€ìƒ‰",className:"h-5 w-5 text-gray-400"})))),a("div",{className:"space-y-3"},a("div",{className:"space-y-2"},a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"ì¹´í…Œê³ ë¦¬:"),["ì „ì²´",s.category1,s.category2].filter((i,u)=>u===0||!!i).map((i,u)=>{if(i==="ì „ì²´")return a("button",{key:"reset","data-breadcrumb":"reset",className:"text-xs hover:text-blue-800 hover:underline",onClick:ue},"ì „ì²´");if(u===1)return a("button",{key:i,"data-breadcrumb":"category1","data-category1":i,className:"text-xs hover:text-blue-800 hover:underline",onClick:ue},i);if(u===2)return a("span",{key:i,className:"text-xs text-gray-600 cursor-default"},i)}).reduce((i,u,S)=>(S>0&&i.push(a("span",{className:"text-xs text-gray-500"},">")),i.push(u),i),[])),!s.category1&&a("div",{className:"flex flex-wrap gap-2"},c?a("div",{className:"text-sm text-gray-500 italic"},"ì¹´í…Œê³ ë¦¬ ë¡œë”© ì¤‘..."):x),s.category1&&n&&n[s.category1]&&a("div",{className:"space-y-2"},a("div",{className:"flex flex-wrap gap-2"},Object.keys(n[s.category1]).map(i=>{const u=s.category2===i;return a("button",{key:i,"data-category1":s.category1,"data-category2":i,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${u?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:lt},i)})))),a("div",{className:"flex gap-2 items-center justify-between"},a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"ê°œìˆ˜:"),a("select",{id:"limit-select",className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:nt},l)),a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"ì •ë ¬:"),a("select",{id:"sort-select",className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:ot},d)))))}window.handleCartQuantityIncrease=e=>{const t=window.cartStore?window.cartStore.getState():null,r=t?t.items.find(n=>n.id===e):null,s=r?r.quantity:1;ne(e,s+1)};window.handleCartQuantityDecrease=e=>{const t=window.cartStore?window.cartStore.getState():null,r=t?t.items.find(n=>n.id===e):null,s=r?r.quantity:1;ne(e,Math.max(1,s-1))};const dt=(e,t)=>{const r=Math.max(1,parseInt(t)||1);e&&ne(e,r)};function ut({id:e,title:t,image:r,price:s,quantity:n,selected:c}){const o=s*n;return a("div",{className:"flex items-center py-3 border-b border-gray-100 cart-item","data-product-id":e},a("label",{className:"flex items-center mr-3"},a("input",{type:"checkbox",checked:c,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":e,onChange:()=>Je(e)})),a("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0"},a("img",{src:r,alt:t,className:"w-full h-full object-cover cursor-pointer cart-item-image","data-product-id":e})),a("div",{className:"flex-1 min-w-0"},a("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title","data-product-id":e},t),a("p",{className:"text-sm text-gray-600 mt-1"},s.toLocaleString(),"ì›"),a("div",{className:"flex items-center mt-2"},a("button",{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onclick:`window.handleCartQuantityDecrease('${e}')`},a(g,{src:"/minus-icon.svg",alt:"ê°ì†Œ",className:"w-3 h-3"})),a("input",{type:"number",value:n,min:"1",className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":e,onChange:l=>dt(e,l.target.value)}),a("button",{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onclick:`window.handleCartQuantityIncrease('${e}')`},a(g,{src:"/plus-icon.svg",alt:"ì¦ê°€",className:"w-3 h-3"})))),a("div",{className:"text-right ml-3"},a("p",{className:"text-sm font-medium text-gray-900"},o.toLocaleString(),"ì›"),a("button",{className:"cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800","data-product-id":e,onClick:()=>$e(e)},"ì‚­ì œ")))}const mt=()=>{w.dispatch({type:b.CLOSE_CART_MODAL})};window.closeCartModal=()=>{w.dispatch({type:b.CLOSE_CART_MODAL})};const gt=e=>{e.target.checked?Xe():Ze()},pt=()=>{w.dispatch({type:b.SHOW_TOAST,payload:{message:"êµ¬ë§¤ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.",type:"info"}})};let J=!1;const be=e=>{e.key==="Escape"&&(w.getState().cartModal.isOpen&&w.dispatch({type:b.CLOSE_CART_MODAL}),document.removeEventListener("keydown",be),J=!1)},ft=()=>{J||(document.addEventListener("keydown",be),J=!0)};function yt({items:e=[],selectedAll:t=!1,isOpen:r=!1}){if(ft(),!r)return"";const s=e.filter(l=>l.selected),n=s.length,c=e.reduce((l,d)=>l+d.price*d.quantity,0),o=s.reduce((l,d)=>l+d.price*d.quantity,0);return a("div",{className:"fixed inset-0 z-50 overflow-y-auto cart-modal-overlay"},a("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:mt}),a("div",{className:"flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4"},a("div",{className:"relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden cart-modal"},a("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between"},a("h2",{className:"text-lg font-bold text-gray-900 flex items-center"},a(g,{src:"/cart-icon.svg",alt:"ì¥ë°”êµ¬ë‹ˆ",className:"w-5 h-5 mr-2"}),"ì¥ë°”êµ¬ë‹ˆ",e.length>0&&a("span",{className:"text-sm font-normal text-gray-600 ml-1"},"(",e.length,")")),a("button",{id:"cart-modal-close-btn",className:"text-gray-400 hover:text-gray-600 p-1",onclick:"window.closeCartModal()"},a(g,{src:"/close-icon.svg",alt:"ë‹«ê¸°",className:"w-6 h-6"}))),e.length===0?a("div",{className:"flex-1 flex items-center justify-center p-8"},a("div",{className:"text-center"},a("div",{className:"text-gray-400 mb-4"},a(g,{src:"/empty-cart-icon.svg",alt:"ë¹ˆ ì¥ë°”êµ¬ë‹ˆ",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤"),a("p",{className:"text-gray-600"},"ì›í•˜ëŠ” ìƒí’ˆì„ ë‹´ì•„ë³´ì„¸ìš”!"))):a("div",{className:"flex flex-col max-h-[calc(90vh-120px)]"},a("div",{className:"p-4 border-b border-gray-200 bg-gray-50"},a("label",{className:"flex items-center text-sm text-gray-700"},a("input",{type:"checkbox",id:"cart-modal-select-all-checkbox",checked:t,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2",onChange:gt}),"ì „ì²´ì„ íƒ (",e.length,"ê°œ)")),a("div",{className:"flex-1 overflow-y-auto"},a("div",{className:"p-4 space-y-4"},e.map(l=>a(ut,{...l}))))),e.length>0&&a("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-4"},n>0&&a("div",{className:"flex justify-between items-center mb-3 text-sm"},a("span",{className:"text-gray-600"},"ì„ íƒí•œ ìƒí’ˆ (",n,"ê°œ)"),a("span",{className:"font-medium"},o.toLocaleString(),"ì›")),a("div",{className:"flex justify-between items-center mb-4"},a("span",{className:"text-lg font-bold text-gray-900"},"ì´ ê¸ˆì•¡"),a("span",{className:"text-xl font-bold text-blue-600"},c.toLocaleString(),"ì›")),a("div",{className:"space-y-2"},n>0&&a("button",{id:"cart-modal-remove-selected-btn",className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:et},"ì„ íƒí•œ ìƒí’ˆ ì‚­ì œ (",n,"ê°œ)"),a("div",{className:"flex gap-2"},a("button",{id:"cart-modal-clear-cart-btn",className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:tt},"ì „ì²´ ë¹„ìš°ê¸°"),a("button",{id:"cart-modal-checkout-btn",className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:pt},"êµ¬ë§¤í•˜ê¸°")))))))}const ht=({error:e})=>a("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},a("div",{className:"text-center"},a("div",{className:"text-red-500 mb-4"},a(g,{src:"/error-large-icon.svg",alt:"ì˜¤ë¥˜",className:"mx-auto h-12 w-12"})),a("h1",{className:"text-xl font-bold text-gray-900 mb-2"},"ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),a("p",{className:"text-gray-600 mb-4"},e||"ìš”ì²­í•˜ì‹  ìƒí’ˆì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."),a("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2"},"ì´ì „ í˜ì´ì§€"),a("a",{href:"/","data-link":"/",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"},"í™ˆìœ¼ë¡œ"))),bt=()=>{w.dispatch({type:b.HIDE_TOAST})};function xt({isVisible:e=!1,message:t="",type:r="info"}){if(!e)return"";const s=()=>{switch(r){case"success":return{bg:"bg-green-600",icon:a(g,{src:"/success-icon.svg",alt:"ì„±ê³µ",className:"w-5 h-5"})};case"error":return{bg:"bg-red-600",icon:a(g,{src:"/error-icon.svg",alt:"ì˜¤ë¥˜",className:"w-5 h-5"})};case"warning":return{bg:"bg-yellow-600",icon:a(g,{src:"/warning-icon.svg",alt:"ê²½ê³ ",className:"w-5 h-5"})};default:return{bg:"bg-blue-600",icon:a(g,{src:"/info-icon.svg",alt:"ì •ë³´",className:"w-5 h-5"})}}},{bg:n,icon:c}=s();return a("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container"},a("div",{className:`${n} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`},a("div",{className:"flex-shrink-0"},c),a("p",{className:"text-sm font-medium"},t),a("button",{id:"toast-close-btn",className:"flex-shrink-0 ml-2 text-white hover:text-gray-200",onClick:bt},a(g,{src:"/close-icon-white.svg",alt:"ë‹«ê¸°",className:"w-4 h-4"}))))}function wt(){return a("h1",{className:"text-xl font-bold text-gray-900"},a("a",{href:"/","data-link":"/"},"ì‡¼í•‘ëª°"))}function vt(){return a("footer",{className:"bg-white shadow-sm sticky top-0 z-40"},a("div",{className:"max-w-md mx-auto py-8 text-center text-gray-500"},a("p",null,"Â© ",new Date().getFullYear()," í•­í•´í”ŒëŸ¬ìŠ¤ í”„ë¡ íŠ¸ì—”ë“œ ì‡¼í•‘ëª°")))}const Et=async e=>{const r=f.getState().products.find(s=>s.productId===e);r&&he(r,1)};function Nt({productId:e,title:t,image:r,lprice:s,brand:n,onClick:c}){const o=Number(s),l=d=>{d.preventDefault(),d.stopPropagation(),console.log("ProductCard clicked:",e),c(e)};return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card","data-product-id":e},a("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image"},a("img",{src:r,alt:t,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy",onClick:l})),a("div",{className:"p-3"},a("div",{className:"cursor-pointer product-info mb-3",onClick:l},a("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1"},t),a("p",{className:"text-xs text-gray-500 mb-2"},n),a("p",{className:"text-lg font-bold text-gray-900"},o.toLocaleString(),"ì›")),a("button",{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":e,onClick:()=>Et(e)},"ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°")))}function St(){return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse"},a("div",{className:"aspect-square bg-gray-200"}),a("div",{className:"p-3"},a("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-2"}),a("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),a("div",{className:"h-8 bg-gray-200 rounded"})))}const Tt=async()=>{try{await se(!0)}catch(e){console.error("ì¬ì‹œë„ ì‹¤íŒ¨:",e)}},Ct=async e=>{console.log("goToDetailPage called with:",e),m.push(`/product/${e}`)};function At({products:e=[],loading:t=!1,error:r=null,totalCount:s=0,hasMore:n=!0}){return r?a("div",{className:"text-center py-12"},a("div",{className:"text-red-500 mb-4"},a(g,{src:"/error-large-icon.svg",alt:"ì˜¤ë¥˜",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"),a("p",{className:"text-gray-600 mb-4"},r),a("button",{id:"retry-btn",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",onClick:Tt},"ë‹¤ì‹œ ì‹œë„")):!t&&e.length===0?a("div",{className:"text-center py-12"},a("div",{className:"text-gray-400 mb-4"},a(g,{src:"/search-large-icon.svg",alt:"ê²€ìƒ‰",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),a("p",{className:"text-gray-600"},"ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.")):a("div",null,s>0&&a("div",{className:"mb-4 text-sm text-gray-600"},"ì´ ",a("span",{className:"font-medium text-gray-900"},s.toLocaleString(),"ê°œ"),"ì˜ ìƒí’ˆ"),a("div",{className:"grid grid-cols-2 gap-4 mb-6",id:"products-grid"},e.map(c=>a(Nt,{...c,onClick:Ct})),t&&Array.from({length:6}).map(()=>a(St,null))),t&&e.length>0&&a("div",{className:"text-center py-4"},a("div",{className:"inline-flex items-center"},a(g,{src:"/loading-icon.svg",alt:"ë¡œë”©",className:"animate-spin h-5 w-5 text-blue-600 mr-2"}),a("span",{className:"text-sm text-gray-600"},"ìƒí’ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."))),!n&&e.length>0&&!t&&a("div",{className:"text-center py-4 text-sm text-gray-500"},"ëª¨ë“  ìƒí’ˆì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤"),a("div",{id:"scroll-trigger",className:"h-4"}))}const Lt=async e=>{const t=new URLSearchParams(e).toString();m.push(`/?${t}`)},Ot=async()=>{const e=f.getState().currentProduct,t={category1:e==null?void 0:e.category1,category2:e==null?void 0:e.category2,currentPage:1},r=new URLSearchParams(t).toString();m.push(`/?${r}`)};window.incrementQuantity=()=>{const e=document.getElementById("quantity-input");if(e){let t=parseInt(e.value)||1;const r=parseInt(e.getAttribute("max"))||100,s=Math.min(r,t+1);e.value=s,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),e.dispatchEvent(new Event("blur",{bubbles:!0})),e.focus(),console.log("incrementQuantity called, new value:",s)}};window.decrementQuantity=()=>{const e=document.getElementById("quantity-input");if(e){let t=parseInt(e.value)||1;const r=Math.max(1,t-1);e.value=r,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),e.dispatchEvent(new Event("blur",{bubbles:!0})),e.focus(),console.log("decrementQuantity called, new value:",r)}};window.goToRelatedProduct=e=>{m.push(`/product/${e}`)};const _t=()=>{const e=document.getElementById("quantity-input"),t=e?parseInt(e.value):1,s=f.getState().currentProduct;s&&he(s,t)};function Rt({product:e,relatedProducts:t=[]}){const{productId:r,title:s,image:n,lprice:c,brand:o,description:l="",rating:d=0,reviewCount:x=0,stock:i=100,category1:u,category2:S}=e,V=Number(c),M=[];return u&&M.push({name:u,category:"category1",value:u}),S&&M.push({name:S,category:"category2",value:S}),typeof window<"u"&&setTimeout(()=>{const y=document.getElementById("quantity-input");y&&(y.value=1,y.dispatchEvent(new Event("input",{bubbles:!0})))},0),a("div",null,M.length>0&&a("nav",{className:"mb-4"},a("div",{className:"flex items-center space-x-2 text-sm text-gray-600"},a("a",{href:"/","data-link":"/",className:"hover:text-blue-600 transition-colors"},"í™ˆ"),M.map((y,q)=>[a(g,{key:`${y.category}-icon`,src:"/chevron-right-icon.svg",alt:"ì˜¤ë¥¸ìª½ í™”ì‚´í‘œ",className:"w-4 h-4 text-gray-400"}),a("button",{key:`${y.category}-btn`,className:"breadcrumb-link",[`data-${y.category}`]:y.value,onClick:()=>Lt(q===0?{category1:y.value}:{category1:M[0].value,category2:y.value})},y.name)]).flat())),a("div",{className:"bg-white rounded-lg shadow-sm mb-6"},a("div",{className:"p-4"},a("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},a("img",{src:n,alt:s,className:"w-full h-full object-cover product-detail-image"})),a("div",null,a("p",{className:"text-sm text-gray-600 mb-1"},o),a("h1",{className:"text-xl font-bold text-gray-900 mb-3"},s),d>0&&a("div",{className:"flex items-center mb-3"},a("div",{className:"flex items-center"},Array(5).fill(0).map((y,q)=>a(g,{key:q,src:"/star-icon.svg",alt:"ë³„ì ",className:`w-4 h-4 ${q<d?"text-yellow-400":"text-gray-300"}`}))),a("span",{className:"ml-2 text-sm text-gray-600"},d,".0 (",x.toLocaleString(),"ê°œ ë¦¬ë·°)")),a("div",{className:"mb-4"},a("span",{className:"text-2xl font-bold text-blue-600"},V.toLocaleString(),"ì›")),a("div",{className:"text-sm text-gray-600 mb-4"},"ì¬ê³  ",i.toLocaleString(),"ê°œ"),l&&a("div",{className:"text-sm text-gray-700 leading-relaxed mb-6"},l))),a("div",{className:"border-t border-gray-200 p-4"},a("div",{className:"flex items-center justify-between mb-4"},a("span",{className:"text-sm font-medium text-gray-900"},"ìˆ˜ëŸ‰"),a("div",{className:"flex items-center"},a("button",{id:"quantity-decrease",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onclick:"window.decrementQuantity()"},a(g,{src:"/quantity-minus-icon.svg",alt:"ìˆ˜ëŸ‰ ê°ì†Œ",className:"w-4 h-4"})),a("input",{type:"number",id:"quantity-input",min:"1",max:i,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),a("button",{id:"quantity-increase",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onclick:"window.incrementQuantity()"},a(g,{src:"/quantity-plus-icon.svg",alt:"ìˆ˜ëŸ‰ ì¦ê°€",className:"w-4 h-4"})))),a("button",{id:"add-to-cart-btn","data-product-id":r,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:_t},"ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°"))),a("div",{className:"mb-6"},a("button",{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:Ot},"ìƒí’ˆ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°")),t.length>0&&a("div",{className:"bg-white rounded-lg shadow-sm"},a("div",{className:"p-4 border-b border-gray-200"},a("h2",{className:"text-lg font-bold text-gray-900"},"ê´€ë ¨ ìƒí’ˆ"),a("p",{className:"text-sm text-gray-600"},"ê°™ì€ ì¹´í…Œê³ ë¦¬ì˜ ë‹¤ë¥¸ ìƒí’ˆë“¤")),a("div",{className:"p-4"},a("div",{className:"grid grid-cols-2 gap-3 responsive-grid"},t.slice(0,20).map(y=>a("div",{key:y.productId,className:"bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer","data-product-id":y.productId,onclick:`window.goToRelatedProduct('${y.productId}')`},a("div",{className:"aspect-square bg-white rounded-md overflow-hidden mb-2"},a("img",{src:y.image,alt:y.title,className:"w-full h-full object-cover",loading:"lazy"})),a("h3",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2"},y.title),a("p",{className:"text-sm font-bold text-blue-600"},Number(y.lprice).toLocaleString(),"ì›")))))))}const Pt=(e=200)=>{const t=window.pageYOffset||document.documentElement.scrollTop,r=window.innerHeight,s=document.documentElement.scrollHeight;return t+r>=s-e},Dt=e=>{let t=!1;return(...r)=>{t||(t=!0,queueMicrotask(()=>{t=!1,e(...r)}))}};window.openCartModal=()=>{w.dispatch({type:b.OPEN_CART_MODAL})};const oe=({headerLeft:e,children:t})=>{const r=E.getState(),{cartModal:s,toast:n}=w.getState(),c=r.items.length,o=a("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},c>99?"99+":c);return a("div",{className:"min-h-screen bg-gray-50"},a("header",{className:"bg-white shadow-sm sticky top-0 z-40"},a("div",{className:"max-w-md mx-auto px-4 py-4"},a("div",{className:"flex items-center justify-between"},e,a("div",{className:"flex items-center space-x-2"},a("button",{id:"cart-icon-btn",className:"relative p-2 text-gray-700 hover:text-gray-900 transition-colors",onclick:"window.openCartModal()"},a(g,{src:"/cart-header-icon.svg",alt:"ì¥ë°”êµ¬ë‹ˆ",className:"w-6 h-6"}),c>0&&o))))),a("main",{className:"max-w-md mx-auto px-4 py-4"},t),a(yt,{...r,isOpen:s.isOpen}),a(xt,{...n}),a(vt,null))},It=a("h1",{className:"text-xl font-bold text-gray-900"},a("a",{href:"/","data-link":"/"},"ì‡¼í•‘ëª°"));let z=!1;const xe=async()=>{var e;if(((e=m.route)==null?void 0:e.path)==="/"&&Pt(200)){const t=f.getState(),r=t.products.length<t.totalCount;if(t.loading||!r)return;try{await Ge()}catch(s){console.error("ë¬´í•œ ìŠ¤í¬ë¡¤ ë¡œë“œ ì‹¤íŒ¨:",s)}}},kt=()=>{z||(window.addEventListener("scroll",xe),z=!0)},Mt=()=>{z&&(window.removeEventListener("scroll",xe),z=!1)},Ut=ye({onMount:()=>{kt(),Be()},onUnmount:()=>{Mt()},watches:[()=>{const{search:e,limit:t,sort:r,category1:s,category2:n}=m.query;return[e,t,r,s,n]},()=>se(!0)]},()=>{const e=f.getState(),{search:t,limit:r,sort:s,category1:n,category2:c}=m.query,{products:o,loading:l,error:d,totalCount:x,categories:i}=e,u={category1:n,category2:c},S=o.length<x;return a(oe,{headerLeft:It},a(it,{searchQuery:t,category:u,sort:s,limit:r,categories:i,loading:l}),a("div",{className:"mb-6"},a(At,{products:o,loading:l,error:d,totalCount:x,hasMore:S})))}),qt=ye({onMount:()=>{ie(m.params.id)},watches:[()=>[m.params.id],()=>ie(m.params.id)]},()=>{const{currentProduct:e,relatedProducts:t=[],error:r,loading:s}=f.getState();return a(oe,{headerLeft:a("div",{className:"flex items-center space-x-3"},a("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-700 hover:text-gray-900 transition-colors"},a(g,{src:"/back-icon.svg",alt:"ë’¤ë¡œ",className:"w-6 h-6"})),a("h1",{className:"text-lg font-bold text-gray-900"},"ìƒí’ˆ ìƒì„¸"))},a("div",{className:"min-h-screen bg-gray-50 p-4"},s?a("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},a("div",{className:"text-center"},a("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a("p",{className:"text-gray-600"},"ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."))):r&&!e?a(ht,{error:r}):a(Rt,{product:e,relatedProducts:t})))}),jt=()=>oe({headerLeft:wt(),children:a("div",{className:"text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg"},a(g,{src:"/404.svg",alt:"í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),a("a",{href:"/","data-link":"/",className:"inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},"í™ˆìœ¼ë¡œ"))});m.addRoute("/",Ut);m.addRoute("/product/:id",qt);m.addRoute(".*",jt);const W=Dt(()=>{const e=document.getElementById("root");if(!e)return;const t=m.target;Pe(a(t,null),e)});function Qt(){f.subscribe(W),E.subscribe(W),w.subscribe(W),m.subscribe(W)}const Ht=()=>Se(async()=>{const{worker:e}=await import("./browser-ipwmi47v.js");return{worker:e}},[]).then(({worker:e})=>e.start({serviceWorker:{url:`${te}mockServiceWorker.js`},onUnhandledRequest:"bypass"}));function Wt(){console.log("ğŸš€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤."),console.log("âœ… MSW ì›Œì»¤ ì‹œì‘ ì™„ë£Œ"),Ke(),console.log("âœ… ì¥ë°”êµ¬ë‹ˆ ë°ì´í„° ë³µì› ì™„ë£Œ"),Qt(),console.log("âœ… ë Œë”ë§ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ"),m.start(),console.log("âœ… ë Œë”ë§ ì„¤ì • ì™„ë£Œ"),console.log("ğŸ‰ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì™„ë£Œ!")}Ht().then(Wt);
